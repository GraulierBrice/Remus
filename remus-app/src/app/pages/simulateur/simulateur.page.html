<ion-header>
  <ion-toolbar>
    <ion-buttons *ngIf='!isModal' slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Lanceur de dés</ion-title>
    <ion-buttons *ngIf='isModal' slot="end" (click)="this.modalCtrl.dismiss(undefined, 'cancel')"><ion-icon class="ion-margin" name="close-outline"></ion-icon></ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]='true'>
    <!-- SLIDES -->
    <ion-slides #slides class="slides" (ionSlideDidChange)="slideChanged()" scrollbar="true">
      <!-- DICE -->
      <ion-slide class="dicesPage">
          <div class="dices">
            <ion-img class="small" *ngFor="let dice of this.diceService.diceList" (click)="increaseDiceSum(dice)" src="/assets/{{dice.name}}.svg"></ion-img>
          </div>
          <div class="control">
            <div class="buttons">
              <ion-button  class="launch" *ngIf="selectedDices !== ''" (click)="launchDice()">Lancer</ion-button>
              <ion-button shape="round" *ngIf="selectedDices !== ''" class="refresh" (click)="resetDices()">
                <ion-icon  name="refresh-outline" ></ion-icon>
              </ion-button>
            </div>
        
            <ion-card-content class="selectDices">{{selectedDices}}</ion-card-content>
            
            <br><br>
            <form>
              <label for="modif">Modificateur :</label><br>
              <input type="number" id="modif" value="" name="fname" [(ngModel)]="modificateur">
            </form>
          </div>

        <ion-fab vertical="bottom" horizontal="end" slot="fixed">
          <ion-fab-button *ngIf="selectedDices !== ''" class="dice" (click)="newMacroAlert()">
            <ion-icon name="add-outline"></ion-icon>
          </ion-fab-button>
        </ion-fab>
      </ion-slide>


      <!-- MACRO -->
      <ion-slide class="macroPage">
        <app-roll-macro class="macroPage" *ngFor="let macro of macroService.macros" [macro]= macro (click)="macroLaunch(macro.dices,macro.modificator)"></app-roll-macro>
      </ion-slide>

      <!-- HISTORIQUE -->
      <ion-slide class="historiquePage" id="test">
        <app-roll-history class="historiquePage" *ngFor="let roll of this.diceHistoryService.history" [roll]= roll></app-roll-history>
      </ion-slide>


    </ion-slides>


  
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-segment  [(ngModel)]="segment" (ionChange)="segmentChanged($event)"  color="warning">
      <ion-segment-button value="0">
        <ion-label>Dés</ion-label>
      </ion-segment-button>
     <ion-segment-button value="1">
        <ion-label>Macros</ion-label>
      </ion-segment-button>
      <ion-segment-button value="2">
        <ion-label>Historique</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-footer>
